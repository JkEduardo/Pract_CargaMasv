@{
    ViewData["Title"] = "Crear Notificación";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="~/css/site.css"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Bootstrap CSS -->
    @* <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" rel="stylesheet"> *@
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Dropzone.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.css" rel="stylesheet">

    <!-- Dropzone.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>


</head>
<body>
    

    <div class="container notification-container">
        <!-- Título de la vista y pestañas -->
        <div class="row">
            <div class="col-md-12">
                <h1 class="notification-title">Crear nueva notificación</h1>
            </div>
        </div>
        <div class="notification-header">
            <div class="notification-tabs">
                <a href="javascript:void(0);" class="tab active" id="pushTab" onclick="showPushNotification()">Notificación push</a>
                <a href="javascript:void(0);" class="tab" id="listTab" onclick="showListNotification()">Notificación en listado</a>
            </div>
        </div>

        <!-- Contenido del formulario (Notificación push por defecto) -->
        <div class="row">
            <!-- Columna izquierda: Formulario -->
            <div class="col-md-7">
                <div class="mb-3">
                    <label for="notificationTitle" class="form-label">Título de notificación</label>
                    <input type="text" class="form-control input-size" id="notificationTitle" maxlength="100" placeholder="Compra autorizada por:" oninput="updatePreview()">
                    <div class="text-end"><small id="titleCounter">Caracteres Máximos 0/100</small></div>
                </div>

                <div class="mb-3">
                    <label for="notificationDescription" class="form-label">Descripción</label>
                    <textarea class="form-control input-size" id="notificationDescription" rows="3" maxlength="150" placeholder="Descripción" oninput="updatePreview()"></textarea>
                    <div class="text-end"><small id="descCounter">Caracteres Máximos 0/150</small></div>
                </div>

                <!-- Nuevo input de estatus -->
                <div class="mb-3">
                    <label for="notificationStatus" class="form-label">Selecciona el estatus</label>
                    <select class="form-control input-size" id="notificationStatus">
                        <option value="" disabled selected>Selecciona el estatus</option>
                        <option value="1">Activa</option>
                        <option value="0">Inactiva</option>
                    </select>
                </div>
                
            </div>

            <!-- Columna derecha: Previsualización -->
            <div class="col-md-5">
                <div class="notification-preview">
                    <div class="notification-icon">
                        
                    </div>
                </div>
            </div>
        </div>

        <!-- Botones de acción -->
        <div class="row mt-3">
            <div class="col-md-12 text-end">
                <button type="button" class="btn btn-secondary" id="cancelarbutton">Cancelar</button>
                <button type="button" class="btn btn-primary" id="createNotificationButton" disabled>Crear notificación</button>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
            function showPushNotification() {
                document.getElementById('pushTab').classList.add('active');
                document.getElementById('listTab').classList.remove('active');
                // Aquí puedes agregar lógica para mostrar el contenido de la vista "Notificación push"
            }

            function showListNotification() {
                document.getElementById('pushTab').classList.remove('active');
                document.getElementById('listTab').classList.add('active');
                // Aquí puedes agregar lógica para mostrar el contenido de la vista "Notificación en listado"
            }

        // Función para habilitar o deshabilitar el botón de Crear Notificación
        $('#titulo, #descripcion, #estatus').on('input change', function () {
            let titulo = $('#titulo').val();
            let descripcion = $('#descripcion').val();
            let estatus = $('#estatus').val();

            if (titulo && descripcion && estatus) {
                $('#btnCrear').prop('disabled', false);
            } else {
                $('#btnCrear').prop('disabled', true);
            }
        });

        // Función para cancelar y regresar a la página de listado
        function cancelar() {
            // Limpiar los campos
            $('#titulo').val('');
            $('#descripcion').val('');
            $('#estatus').val('');
            $('#imagen').val('');

            // Redirigir a la página de listado
            window.location.href = '/Notificaciones/Listado';
        }

        // Función para crear la notificación
        function crearNotificacion() {
            // Aquí podrías realizar la lógica de envío de datos al servidor
            alert('Notificación creada!');
        }

        // Función para mostrar la vista de Notificación en Listado manteniendo los datos capturados
        function mostrarListado() {
            // Redirigir a la vista de Notificación en Listado
            // Puedes usar sessionStorage o localStorage para almacenar los datos temporalmente si es necesario
            window.location.href = '/Notificaciones/NotificacionListado';
        }
    </script>

</body>
</html>
